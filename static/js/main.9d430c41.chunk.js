(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e,t,a){e.exports=a(76)},76:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(25),o=a.n(c),l=a(12),s=a(13),i=a(15),u=a(14),m=a(16),p=a(11),d=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement(p.b,{className:"dropdown-item",to:"/login"},"Login")),n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement(p.b,{className:"dropdown-item",to:"/signup"},"Signup")))},g=function(e){var t=e.onLogout,a=e.currentUser;return n.a.createElement(n.a.Fragment,null,n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement(p.b,{className:"dropdown-item",to:"#"},a.username)),n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement("a",{className:"dropdown-item",onClick:t},"Logout")))},E=function(e){var t=e.currentUser,a=e.onLogout;return n.a.createElement(n.a.Fragment,null,n.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light navbar-forum"},n.a.createElement("div",{className:"container"},n.a.createElement(p.b,{className:"navbar-brand",to:"/"},"LOGO"),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},n.a.createElement("ul",{className:"navbar-nav ml-auto"},t?n.a.createElement(g,{currentUser:t,onLogout:a}):n.a.createElement(d,null))))))},f=a(20),b=function(e){var t=e.tags,a=e.onClickTag;return t?n.a.createElement("div",{className:"col-md-3 d-none d-sm-block"},n.a.createElement("ul",{className:"list-group"},t.map(function(e){return n.a.createElement("button",{type:"button",className:"list-group-item list-group-item-action",key:e,onClick:function(){return a(e)}},"#",e)}))):n.a.createElement("div",{className:"col-md-3 "},"Loading Tags...")},v=function(e){var t=e.article;return n.a.createElement("div",{className:"card mb-3"},n.a.createElement("div",{className:"card-header"},n.a.createElement("img",{src:t.author.image,className:"mr-3 rounded-circle",width:"40px",height:"40px",alt:""}),n.a.createElement("span",{className:"text-sm text-muted"},t.author.username,","," ",n.a.createElement("b",null,new Date(t.createdAt).toDateString())),n.a.createElement(p.b,{to:"article/".concat(t.slug),className:"btn btn-info btn-xs float-right"},"Read More")),n.a.createElement("div",{className:"card-body"},n.a.createElement("h3",{className:"text-center"},t.title),n.a.createElement("p",{className:"text-center"},"".concat(t.body.substring(0,20),"..."))),n.a.createElement("div",{className:"card-footer text-muted"},n.a.createElement("button",{className:"btn btn-outline-primary"},"Vote ",t.favoritesCount),t.tagList.map(function(e){return n.a.createElement(p.b,{to:"#",className:"btn float-right btn-xs",key:e},"#",e)})))},h=function(e){var t=e.articles;return t?n.a.createElement("div",{className:"col-md-9"},t.map(function(e){return n.a.createElement(v,{article:e,key:e.slug})})):n.a.createElement("div",{className:"col-md-9"},"Loading Articles...")},N=a(9),y=a(3),O=a.n(y),S=a(17),w=a(22),j=a.n(w),L="https://conduit.productionready.io/api",T=function(e){return e.data};localStorage.getItem("token")&&(j.a.defaults.headers.common.Authorization="Token ".concat(localStorage.getItem("token")));var A=function(e){return j.a.get("".concat(L).concat(e)).then(T)},C=function(e,t){return j.a.post("".concat(L).concat(e),t).then(T)},x=function(e){return j.a.del("".concat(L).concat(e)).then(T)},_={getAll:function(){return A("/articles?limit=10")},getSlug:function(e){return A("/articles/".concat(e))},byTag:function(e){return A("/articles?limit=10&tag=".concat(e))},favorite:function(e){return C("/articles/".concat(e,"/favorite"))},unfavorite:function(e){return x("/articles/".concat(e,"/favorite"))}},I={login:function(e,t){return C("/users/login",{user:{email:e,password:t}})},signup:function(e,t,a){return C("/users",{user:{username:e,email:t,password:a}})},getUser:function(){return A("/user")}},k={getAll:function(){return A("/tags")}},U=a(2),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TAGS":return Object(U.a)({},e,{tags:t.payload});default:return e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_ARTICLES":return Object(U.a)({},e,{loading:!0,articles:null});case"SET_ARTICLES":return Object(U.a)({},e,{loading:!1,articles:t.payload});case"REQUEST_ARTICLES_FAILED":return Object(U.a)({},e,{error:t.error});case"REQUEST_SINGLE_ARTICLE":return Object(U.a)({},e,{loading:!0,article:null});case"SET_SINGLE_ARTICLE":return Object(U.a)({},e,{loading:!1,article:t.payload});case"FILTER_TAG":return Object(U.a)({},e,{tag:t.tag,articles:t.payload});default:return e}},G=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).onClickTag=function(e){a.props.filterTag(e)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.setArticles(),this.props.setTags()}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(b,{tags:this.props.tags,onClickTag:this.onClickTag}),n.a.createElement(h,{articles:this.props.articles}))}}]),t}(n.a.Component),F=Object(N.b)(function(e){return{articles:e.articles.articles,tags:e.home.tags,tag:e.articles.tag}},{setTags:function(){return function(){var e=Object(S.a)(O.a.mark(function e(t){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getAll();case 2:a=e.sent,t({type:"SET_TAGS",payload:a.tags});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},setArticles:function(){return function(){var e=Object(S.a)(O.a.mark(function e(t){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_ARTICLES"}),e.prev=1,e.next=4,_.getAll();case 4:a=e.sent,t({type:"SET_ARTICLES",payload:a.articles}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"REQUEST_ARTICLES_FAILED",error:e.t0});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},filterTag:function(e){return function(){var t=Object(S.a)(O.a.mark(function t(a){var r;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.byTag(e);case 2:r=t.sent,a({type:"FILTER_TAG",tag:e,payload:r.articles});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(G),P=a(21),Q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={email:"",password:""},a.onChange=function(e){a.setState(Object(P.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault(),a.props.login(a.state,a.props.history)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return console.log(this.props),n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-header"},"Login"),n.a.createElement("div",{className:"card-body"},n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{htmlFor:"email",className:"col-sm-4 col-form-label text-md-right"},"E-Mail Address"),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("input",{onChange:this.onChange,type:"text",className:"form-control",value:this.state.email,name:"email",required:!0,autoFocus:!0}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{htmlFor:"password",className:"col-sm-4 col-form-label text-md-right"},"Password"),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("input",{onChange:this.onChange,type:"password",className:"form-control",value:this.state.password,name:"password",required:!0}))),n.a.createElement("div",{className:"form-group row mb-0"},n.a.createElement("div",{className:"col-md-8 offset-md-4"},n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login"))))))}}]),t}(r.Component),M=Object(N.b)(function(e){var t=e.auth;return{loading:t.loading,error:t.error}},{login:function(e,t){var a=e.email,r=e.password;return function(){var e=Object(S.a)(O.a.mark(function e(n){var c;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"LOGIN_REQUEST"}),e.prev=1,e.next=4,I.login(a,r);case 4:c=e.sent,t.push("/"),localStorage.setItem("token",c.user.token),n({type:"LOGIN_SUCCESS",payload:c.user}),n({type:"APP_LOAD",payload:c.user}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n({type:"LOGIN_FAILED",error:e.t0});case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()}})(Q),q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={username:"",email:"",password:""},a.onChange=function(e){a.setState(Object(P.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault(),a.props.signup(a.state,a.props.history)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,r=e.password;return n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-header"},"Sign Up"),n.a.createElement("div",{className:"card-body"},n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{htmlFor:"name",className:"col-sm-4 col-form-label text-md-right"},"Username"),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("input",{onChange:this.onChange,type:"text",className:"form-control is-invalid",name:"username",value:t,required:!0,autoFocus:!0}),n.a.createElement("span",{className:"invalid-feedback"},n.a.createElement("strong",null,"The name is required.")))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{htmlFor:"email",className:"col-sm-4 col-form-label text-md-right"},"E-Mail Address"),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("input",{onChange:this.onChange,type:"text",className:"form-control",name:"email",value:a,required:!0}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{htmlFor:"password",className:"col-sm-4 col-form-label text-md-right"},"Password"),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("input",{onChange:this.onChange,type:"password",className:"form-control",name:"password",value:r,required:!0}))),n.a.createElement("div",{className:"form-group row mb-0"},n.a.createElement("div",{className:"col-md-8 offset-md-4"},n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Sign Up"))))))}}]),t}(r.Component),z=Object(N.b)(function(e){var t=e.auth;return{loading:t.loading,error:t.error}},{signup:function(e,t){var a=e.username,r=e.email,n=e.password;return function(){var e=Object(S.a)(O.a.mark(function e(c){var o;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"SIGNUP_REQUEST"}),e.prev=1,e.next=4,I.signup(a,r,n);case 4:o=e.sent,t.push("/"),localStorage.setItem("token",o.user.token),c({type:"SIGNUP_SUCCESS",payload:o.user}),c({type:"APP_LOAD",payload:o.user}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),c({type:"SIGNUP_FAILED",error:e.t0});case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()}})(q),J=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.setArticle(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.article;return console.log(this.props.article),e?n.a.createElement("div",{className:"card mb-8"},n.a.createElement("div",{className:"card-header"},n.a.createElement("img",{src:e.author.image,className:"mr-3 rounded-circle",width:"40px",height:"40px",alt:""}),n.a.createElement("span",{className:"text-sm text-muted"},e.author.username,","," ",n.a.createElement("b",null,new Date(e.createdAt).toDateString()))),n.a.createElement("div",{className:"card-body"},n.a.createElement("h3",{className:"text-center"},e.title),n.a.createElement("p",{className:"text-center"},e.body)),n.a.createElement("div",{className:"card-footer text-muted"},n.a.createElement("button",{type:"button",className:"btn"},n.a.createElement("i",{className:"fas fa-heart"}),"sdfsdf"),e.tagList.map(function(e){return n.a.createElement("a",{href:"#",className:"btn float-right btn-xs",key:e},"#",e)}))):n.a.createElement("div",null,"Loading Article...")}}]),t}(n.a.Component),V=Object(N.b)(function(e){return{article:e.articles.article}},{setArticle:function(e){return function(){var t=Object(S.a)(O.a.mark(function t(a){var r;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"REQUEST_SINGLE_ARTICLE"}),t.next=3,_.getSlug(e);case 3:r=t.sent,a({type:"SET_SINGLE_ARTICLE",payload:r.article});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(J),X=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{path:"/",exact:!0,component:F}),n.a.createElement(f.a,{path:"/login",component:M}),n.a.createElement(f.a,{path:"/signup",component:z}),n.a.createElement(f.a,{path:"/article/:id",component:V}))},B=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).onLogout=function(e){e.preventDefault(),a.props.logout(a.props.history)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")&&this.props.getCurrentUser()}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(E,{currentUser:this.props.currentUser,onLogout:this.onLogout}),n.a.createElement("div",{className:"my-4"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement(X,null)))))}}]),t}(r.Component),H=Object(N.b)(function(e){return{currentUser:e.auth.currentUser}},{getCurrentUser:function(){return function(){var e=Object(S.a)(O.a.mark(function e(t){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getUser();case 2:a=e.sent,t({type:"APP_LOAD",payload:a.user});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},logout:function(e){return function(t){localStorage.removeItem("token"),e.push("/"),t({type:"LOGOUT"})}}})(B),K=a(23),W=a(45),Y=a(4),Z=a(19),$=Object(Z.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case"APP_LOAD":return Object(U.a)({},e);default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":case"SIGNUP_REQUEST":return Object(U.a)({},e,{loading:!0,error:null});case"LOGIN_SUCCESS":case"SIGNUP_SUCCESS":return Object(U.a)({},e,{loading:!1,error:null});case"LOGIN_FAILED":case"SIGNUP_FAILED":return Object(U.a)({},e,{error:t.error.message});case"APP_LOAD":return Object(U.a)({},e,{currentUser:t.payload});case"LOGOUT":return Object(U.a)({},e,{currentUser:null});default:return e}},home:R,articles:D,router:K.routerReducer}),ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({serialize:!0})||Z.d,te=Object(Y.a)(),ae=Object(Z.e)($,ee(Object(Z.a)(W.a,Object(K.routerMiddleware)(te)))),re=Object(f.e)(H);o.a.render(n.a.createElement(N.a,{store:ae},n.a.createElement(p.a,{basename:"/blog-site"},n.a.createElement(re,null))),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.9d430c41.chunk.js.map