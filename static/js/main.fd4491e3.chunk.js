(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e,t,a){e.exports=a(76)},76:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(25),o=a.n(c),s=a(13),l=a(14),i=a(16),u=a(15),m=a(17),p=a(12),d=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement(p.b,{className:"dropdown-item",to:"/login"},"Login")),n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement(p.b,{className:"dropdown-item",to:"/signup"},"Signup")))},f=function(e){var t=e.onLogout,a=e.currentUser;return n.a.createElement(n.a.Fragment,null,n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement(p.b,{className:"dropdown-item",to:"#"},a.username)),n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement("a",{className:"dropdown-item",onClick:t},"Logout")))},g=function(e){var t=e.currentUser,a=e.onLogout;return n.a.createElement(n.a.Fragment,null,n.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light navbar-forum"},n.a.createElement("div",{className:"container"},n.a.createElement(p.b,{className:"navbar-brand",to:"/"},"LOGO"),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},n.a.createElement("ul",{className:"navbar-nav ml-auto"},t?n.a.createElement(f,{currentUser:t,onLogout:a}):n.a.createElement(d,null))))))},E=a(20),v=function(e){var t=e.tags,a=e.onClickTag;return t?n.a.createElement("div",{className:"col-md-3 d-none d-sm-block"},n.a.createElement("ul",{className:"list-group"},t.map(function(e){return n.a.createElement("button",{type:"button",className:"list-group-item list-group-item-action",key:e,onClick:function(){return a(e)}},"#",e)}))):n.a.createElement("div",{className:"col-md-3 "},"Loading Tags...")},b=a(2),h=a.n(b),y=a(11),N=a(22),O=a.n(N),S="https://conduit.productionready.io/api",w=function(e){return e.data};localStorage.getItem("token")&&(O.a.defaults.headers.common.Authorization="Token ".concat(localStorage.getItem("token")));var j=function(e){return O.a.get("".concat(S).concat(e)).then(w)},T=function(e,t){return O.a.post("".concat(S).concat(e),t).then(w)},A=function(e){return O.a.delete("".concat(S).concat(e)).then(w)},L={getAll:function(){return j("/articles?limit=10")},getSlug:function(e){return j("/articles/".concat(e))},byTag:function(e){return j("/articles?limit=10&tag=".concat(e))},favorite:function(e){return T("/articles/".concat(e,"/favorite"))},unfavorite:function(e){return A("/articles/".concat(e,"/favorite"))}},C={login:function(e,t){return T("/users/login",{user:{email:e,password:t}})},signup:function(e,t,a){return T("/users",{user:{username:e,email:t,password:a}})},getUser:function(){return j("/user")}},x={getAll:function(){return j("/tags")}},I=a(3),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_ARTICLES":return Object(I.a)({},e,{loading:!0,articles:null});case"SET_ARTICLES":return Object(I.a)({},e,{loading:!1,articles:t.payload});case"REQUEST_ARTICLES_FAILED":return Object(I.a)({},e,{error:t.error});case"REQUEST_SINGLE_ARTICLE":return Object(I.a)({},e,{loading:!0,article:null});case"SET_SINGLE_ARTICLE":return Object(I.a)({},e,{loading:!1,article:t.payload});case"FILTER_TAG":return Object(I.a)({},e,{tag:t.tag,articles:t.payload});case"FAVORITE":case"UNFAVORITE":return Object(I.a)({},e,{articles:e.articles.map(function(e){return e.slug===t.slug?Object(I.a)({},e,{favorite:t.payload.favorited,favoritesCount:t.payload.favoritesCount}):e})});default:return e}},U=a(4),_=void 0,R=Object(U.b)(function(e){return{currentUser:e.auth.currentUser}},{favorite:function(e){return function(){var t=Object(y.a)(h.a.mark(function t(a){var r;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.favorite(e);case 2:r=t.sent,a({type:"FAVORITE",slug:e,payload:r.article});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},unfavorite:function(e){return function(){var t=Object(y.a)(h.a.mark(function t(a){var r;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.unfavorite(e);case 2:r=t.sent,a({type:"UNFAVORITE",slug:e,payload:r.article});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(function(e){var t=e.article,a=e.favorite,r=e.unfavorite,c=e.currentUser,o=t.favorite?"btn btn-primary":"btn btn-outline-primary";return n.a.createElement("div",{className:"card mb-3"},n.a.createElement("div",{className:"card-header"},n.a.createElement("img",{src:t.author.image,className:"mr-3 rounded-circle",width:"40px",height:"40px",alt:""}),n.a.createElement("span",{className:"text-sm text-muted"},t.author.username,","," ",n.a.createElement("b",null,new Date(t.createdAt).toDateString())),n.a.createElement(p.b,{to:"article/".concat(t.slug),className:"btn btn-info btn-xs float-right"},"Read More")),n.a.createElement("div",{className:"card-body"},n.a.createElement("h3",{className:"text-center"},t.title),n.a.createElement("p",{className:"text-center"},"".concat(t.body.substring(0,20),"..."))),n.a.createElement("div",{className:"card-footer text-muted"},n.a.createElement("button",{onClick:function(e){return e.preventDefault(),c?t.favorite?void r(t.slug):void a(t.slug):_.props.history.push("/")},className:o},"Vote ",t.favoritesCount),t.tagList.map(function(e){return n.a.createElement(p.b,{to:"#",className:"btn float-right btn-xs",key:e},"#",e)})))}),F=function(e){var t=e.articles;return t?n.a.createElement("div",{className:"col-md-9"},t.map(function(e){return n.a.createElement(R,{article:e,key:e.slug})})):n.a.createElement("div",{className:"col-md-9"},"Loading Articles...")},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TAGS":return Object(I.a)({},e,{tags:t.payload});default:return e}},G=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).onClickTag=function(e){a.props.filterTag(e)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.setArticles(),this.props.setTags()}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(v,{tags:this.props.tags,onClickTag:this.onClickTag}),n.a.createElement(F,{articles:this.props.articles}))}}]),t}(n.a.Component),P=Object(U.b)(function(e){return{articles:e.articles.articles,tags:e.home.tags,tag:e.articles.tag}},{setTags:function(){return function(){var e=Object(y.a)(h.a.mark(function e(t){var a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getAll();case 2:a=e.sent,t({type:"SET_TAGS",payload:a.tags});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},setArticles:function(){return function(){var e=Object(y.a)(h.a.mark(function e(t){var a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_ARTICLES"}),e.prev=1,e.next=4,L.getAll();case 4:a=e.sent,t({type:"SET_ARTICLES",payload:a.articles}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"REQUEST_ARTICLES_FAILED",error:e.t0});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},filterTag:function(e){return function(){var t=Object(y.a)(h.a.mark(function t(a){var r;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.byTag(e);case 2:r=t.sent,a({type:"FILTER_TAG",tag:e,payload:r.articles});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(G),Q=a(21),M=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={email:"",password:""},a.onChange=function(e){a.setState(Object(Q.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault(),a.props.login(a.state,a.props.history)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return console.log(this.props),n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-header"},"Login"),n.a.createElement("div",{className:"card-body"},n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{htmlFor:"email",className:"col-sm-4 col-form-label text-md-right"},"E-Mail Address"),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("input",{onChange:this.onChange,type:"text",className:"form-control",value:this.state.email,name:"email",required:!0,autoFocus:!0}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{htmlFor:"password",className:"col-sm-4 col-form-label text-md-right"},"Password"),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("input",{onChange:this.onChange,type:"password",className:"form-control",value:this.state.password,name:"password",required:!0}))),n.a.createElement("div",{className:"form-group row mb-0"},n.a.createElement("div",{className:"col-md-8 offset-md-4"},n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login"))))))}}]),t}(r.Component),q=Object(U.b)(function(e){var t=e.auth;return{loading:t.loading,error:t.error}},{login:function(e,t){var a=e.email,r=e.password;return function(){var e=Object(y.a)(h.a.mark(function e(n){var c;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"LOGIN_REQUEST"}),e.prev=1,e.next=4,C.login(a,r);case 4:c=e.sent,t.push("/"),localStorage.setItem("token",c.user.token),n({type:"LOGIN_SUCCESS",payload:c.user}),n({type:"APP_LOAD",payload:c.user}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n({type:"LOGIN_FAILED",error:e.t0});case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()}})(M),V=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={username:"",email:"",password:""},a.onChange=function(e){a.setState(Object(Q.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault(),a.props.signup(a.state,a.props.history)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,r=e.password;return n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-header"},"Sign Up"),n.a.createElement("div",{className:"card-body"},n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{htmlFor:"name",className:"col-sm-4 col-form-label text-md-right"},"Username"),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("input",{onChange:this.onChange,type:"text",className:"form-control is-invalid",name:"username",value:t,required:!0,autoFocus:!0}),n.a.createElement("span",{className:"invalid-feedback"},n.a.createElement("strong",null,"The name is required.")))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{htmlFor:"email",className:"col-sm-4 col-form-label text-md-right"},"E-Mail Address"),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("input",{onChange:this.onChange,type:"text",className:"form-control",name:"email",value:a,required:!0}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{htmlFor:"password",className:"col-sm-4 col-form-label text-md-right"},"Password"),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("input",{onChange:this.onChange,type:"password",className:"form-control",name:"password",value:r,required:!0}))),n.a.createElement("div",{className:"form-group row mb-0"},n.a.createElement("div",{className:"col-md-8 offset-md-4"},n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Sign Up"))))))}}]),t}(r.Component),J=Object(U.b)(function(e){var t=e.auth;return{loading:t.loading,error:t.error}},{signup:function(e,t){var a=e.username,r=e.email,n=e.password;return function(){var e=Object(y.a)(h.a.mark(function e(c){var o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"SIGNUP_REQUEST"}),e.prev=1,e.next=4,C.signup(a,r,n);case 4:o=e.sent,t.replace("/"),localStorage.setItem("token",o.user.token),c({type:"SIGNUP_SUCCESS",payload:o.user}),c({type:"APP_LOAD"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),c({type:"SIGNUP_FAILED",error:e.t0});case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()}})(V),X=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.setArticle(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.article;return console.log(this.props.article),e?n.a.createElement("div",{className:"card mb-8"},n.a.createElement("div",{className:"card-header"},n.a.createElement("img",{src:e.author.image,className:"mr-3 rounded-circle",width:"40px",height:"40px",alt:""}),n.a.createElement("span",{className:"text-sm text-muted"},e.author.username,","," ",n.a.createElement("b",null,new Date(e.createdAt).toDateString()))),n.a.createElement("div",{className:"card-body"},n.a.createElement("h3",{className:"text-center"},e.title),n.a.createElement("p",{className:"text-center"},e.body)),n.a.createElement("div",{className:"card-footer text-muted"},n.a.createElement("button",{type:"button",className:"btn"},n.a.createElement("i",{className:"fas fa-heart"}),"sdfsdf"),e.tagList.map(function(e){return n.a.createElement("a",{href:"#",className:"btn float-right btn-xs",key:e},"#",e)}))):n.a.createElement("div",null,"Loading Article...")}}]),t}(n.a.Component),z=Object(U.b)(function(e){return{article:e.articles.article}},{setArticle:function(e){return function(){var t=Object(y.a)(h.a.mark(function t(a){var r;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"REQUEST_SINGLE_ARTICLE"}),t.next=3,L.getSlug(e);case 3:r=t.sent,a({type:"SET_SINGLE_ARTICLE",slug:e,payload:r.article});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(X),B=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(E.a,{path:"/",exact:!0,component:P}),n.a.createElement(E.a,{path:"/login",component:q}),n.a.createElement(E.a,{path:"/signup",component:J}),n.a.createElement(E.a,{path:"/article/:id",component:z}))},H=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).onLogout=function(e){e.preventDefault(),a.props.logout(a.props.history)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")&&this.props.getCurrentUser()}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(g,{currentUser:this.props.currentUser,onLogout:this.onLogout}),n.a.createElement("div",{className:"my-4"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement(B,null)))))}}]),t}(r.Component),K=Object(U.b)(function(e){return{currentUser:e.auth.currentUser}},{getCurrentUser:function(){return function(){var e=Object(y.a)(h.a.mark(function e(t){var a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getUser();case 2:a=e.sent,t({type:"APP_LOAD",payload:a.user});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},logout:function(e){return function(t){localStorage.removeItem("token"),e.push("/"),t({type:"LOGOUT"})}}})(H),W=a(23),Y=a(45),Z=a(5),$=a(19),ee=Object($.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case"APP_LOAD":return{};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":case"SIGNUP_REQUEST":return Object(I.a)({},e,{loading:!0,error:null});case"LOGIN_SUCCESS":case"SIGNUP_SUCCESS":return Object(I.a)({},e,{loading:!1,error:null});case"LOGIN_FAILED":case"SIGNUP_FAILED":return Object(I.a)({},e,{error:t.error.message});case"APP_LOAD":return Object(I.a)({},e,{currentUser:t.payload});case"LOGOUT":return Object(I.a)({},e,{currentUser:null});default:return e}},home:D,articles:k,router:W.routerReducer}),te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$.d,ae=Object(Z.a)(),re=Object($.e)(ee,te(Object($.a)(Y.a,Object(W.routerMiddleware)(ae)))),ne=Object(E.e)(K);o.a.render(n.a.createElement(U.a,{store:re},n.a.createElement(p.a,{basename:"/blog-site"},n.a.createElement(ne,null))),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.fd4491e3.chunk.js.map